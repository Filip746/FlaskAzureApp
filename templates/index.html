<!DOCTYPE html>
<html>

<head>
    <title>Azure ML Prediction</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 50px;
        }

        textarea {
            width: 80%;
            height: 100px;
            margin-bottom: 10px;
        }

        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }

        #result {
            margin-top: 20px;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <h2>Enter Data for Prediction</h2>
    <form id="predict-form">
        <textarea id="input-data"
            placeholder='{"Name": "", "Author": "", "User Rating": 0, "Reviews": 0, "Price": 0, "Year": 0, "Genre": ""}]'></textarea><br>
        <button type="button" onclick="sendPrediction()">Predict</button>
    </form>
    <h3>Prediction Result:</h3>
    <p id="result"></p>

    <script>
        function sendPrediction() {
            let inputData = document.getElementById("input-data").value;
            try {
                let parsedData = JSON.parse(inputData);
                fetch('/predict', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(parsedData)
                })
                    .then(response => response.json())
                    .then(data => {
                        let scoredLabel = data["Scored Labels"];
                        document.getElementById("result").innerText = scoredLabel;
                        console.log("Full response:", data);
                    })
                    .catch(error => console.error('Error:', error));
            } catch (e) {
                alert("Invalid JSON format. Please correct and try again.");
            }
        }
    </script>
</body>

</html>